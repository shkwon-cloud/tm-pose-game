# 게임 규칙

# 🍎 과일 받기 게임 (Fruit Catcher)

## 📝 게임 설명

하늘에서 떨어지는 과일을 바구니로 받는 포즈 인식 게임입니다.
얼굴 방향을 좌/중앙/우로 움직여 바구니를 조작하고, 과일을 받아 점수를 획득하세요!
폭탄을 받거나 과일을 너무 많이 놓치면 게임 오버됩니다.

---

## 🎯 게임 목표

- **제한 시간**: 60초 동안 최대한 많은 과일 받기
- **목표 점수**: 500점 이상
- **생존**: 폭탄을 피하고 과일 놓침 3회 이내로 유지하기

---

## 🕹️ 게임 규칙

### 기본 규칙

1. **시작**: "Start" 버튼을 클릭하여 게임 시작

2. **바구니 조작**: 얼굴 방향으로 바구니 이동
   - **왼쪽 포즈** → 바구니가 왼쪽 구역으로 이동
   - **정면 포즈** → 바구니가 중앙 구역으로 이동
   - **오른쪽 포즈** → 바구니가 오른쪽 구역으로 이동

3. **아이템 낙하**: 화면 상단에서 과일과 폭탄이 무작위로 떨어짐
   - 3개 구역(LEFT / CENTER / RIGHT) 중 랜덤 위치에서 생성
   - 시간이 지날수록 낙하 속도 증가

4. **점수 획득**: 바구니와 같은 구역에 과일이 도착하면 점수 획득

5. **게임 오버 조건**:
   - 폭탄을 받으면 **즉시 게임 오버**
   - 과일을 **3번 놓치면 게임 오버**
   - 제한 시간 60초 종료

---

## 🎨 필요한 포즈 목록

Teachable Machine에서 학습할 포즈 클래스:

| 포즈 이름 | 설명 | 게임 내 동작 |
|---------|------|------------|
| LEFT | 얼굴을 왼쪽으로 돌린 상태 | 바구니가 왼쪽 구역으로 이동 |
| CENTER | 정면을 바라본 상태 | 바구니가 중앙 구역으로 이동 |
| RIGHT | 얼굴을 오른쪽으로 돌린 상태 | 바구니가 오른쪽 구역으로 이동 |

> **참고**: 각 포즈마다 Teachable Machine에서 최소 50개 이상의 샘플을 수집하는 것을 권장합니다.
> 다양한 각도와 조명 환경에서 샘플을 수집하면 인식 정확도가 향상됩니다.

---

## 🍊 아이템 종류

| 아이템 | 점수 | 설명 |
|-------|------|------|
| 🍎 사과 (Apple) | +100점 | 기본 과일 |
| 🍐 배 (Pear) | +150점 | 중간 가치 과일 |
| 🍊 오렌지 (Orange) | +200점 | 고가치 과일 |
| 💣 폭탄 (Bomb) | 게임 오버 | 받으면 즉시 게임 종료 |

### 아이템 생성 확률
- 사과: 40%
- 배: 30%
- 오렌지: 20%
- 폭탄: 10%

---

## 📊 점수 체계

| 행동 | 점수 |
|-----|------|
| 사과 받기 | +100점 |
| 배 받기 | +150점 |
| 오렌지 받기 | +200점 |
| 과일 놓침 | 놓침 카운트 +1 (3회 시 게임 오버) |
| 폭탄 받기 | 즉시 게임 오버 |

---

## ⏱️ 시간 및 난이도 설정

### 기본 설정
- **제한 시간**: 60초
- **아이템 생성 간격**: 초기 2초마다 1개
- **아이템 낙하 속도**: 초기 2초 (화면 상단 → 하단)

### 난이도 증가 (레벨 시스템)
- **레벨업 조건**: 20초마다 레벨 1 증가
- **레벨 1 (0-20초)**: 
  - 생성 간격: 2초
  - 낙하 속도: 2초
- **레벨 2 (20-40초)**: 
  - 생성 간격: 1.5초
  - 낙하 속도: 1.5초
- **레벨 3 (40-60초)**: 
  - 생성 간격: 1초
  - 낙하 속도: 1초

---

## 🎮 화면 구성

### 게임 영역
```
┌─────────────────────────────────┐
│  점수: 350   레벨: 2   시간: 35초  │
│  놓침: 1/3                        │
├─────────────────────────────────┤
│                                 │
│         [아이템들이 떨어짐]        │
│                                 │
│                                 │
│   🧺      🧺      🧺            │
│  LEFT   CENTER   RIGHT          │
└─────────────────────────────────┘
│      [웹캠 화면 + 포즈 인식]       │
└─────────────────────────────────┘
```

### UI 요소
- **상단 정보 바**:
  - 현재 점수
  - 현재 레벨
  - 남은 시간
  - 놓침 카운트 (X/3)
  
- **게임 영역**:
  - 3개 구역 (LEFT, CENTER, RIGHT)
  - 떨어지는 아이템 표시
  - 바구니 위치 표시

- **하단 영역**:
  - 웹캠 화면 (포즈 인식)
  - 현재 인식된 포즈 표시

---

## 🎵 추가 기능 (선택사항)

- [ ] 효과음 추가
  - 과일 받기 성공 사운드
  - 폭탄 받기 실패 사운드
  - 과일 놓침 사운드
  - 레벨업 사운드
  
- [ ] 배경음악

- [ ] 콤보 시스템
  - 연속으로 3개 이상 받으면 콤보 보너스 +50점
  
- [ ] 파워업 아이템
  - ⭐ 스타: 5초간 폭탄 무적
  - 🌈 레인보우: 모든 과일 점수 2배

- [ ] 리더보드 (최고 점수 저장)

---

## 💡 게임 개발 팁

### Teachable Machine 모델 학습 시 주의사항

1. **다양한 환경에서 샘플 수집**
   - 밝은 곳 / 어두운 곳
   - 다양한 배경
   - 여러 각도와 거리

2. **충분한 샘플 수집**
   - 각 클래스당 최소 50개 이상 권장
   - LEFT, CENTER, RIGHT 각각 균등하게 수집

3. **명확한 포즈 구분**
   - 왼쪽/오른쪽 포즈는 충분히 각도를 주어 명확하게 구분
   - 정면 포즈는 자연스러운 중립 상태로 학습

4. **⚠️ 모델 업데이트 후 반드시 확인**
   - 모델 학습 완료 후 `my_model/metadata.json` 파일 확인 필수
   - 파일을 열어서 `"labels"` 항목에 학습한 클래스 이름이 정확히 들어있는지 확인
   - 예시:
   ```json
   {
     "labels": ["LEFT", "CENTER", "RIGHT"]
   }
   ```
   - **위 라벨 정보를 기준으로 게임 코드를 작성해야 함**

5. **⚠️ 라벨 불일치 시 대응 방법**

   만약 metadata.json의 라벨과 이 문서의 포즈 목록이 다른 경우:

   **옵션 A: metadata.json 기준으로 수정 (권장)**
   - metadata.json의 실제 라벨 이름에 맞춰 게임 코드 작성
   - 예: 라벨이 "왼쪽", "중앙", "오른쪽"이면 그대로 사용

   **옵션 B: 라벨 매핑 테이블 작성**
   - 두 이름이 다를 경우, 매핑 관계를 명확히 정의
   - 게임 코드에서 매핑 테이블 사용

---

## 🎯 게임 로직 구현 가이드

### gameEngine.js에서 구현할 주요 기능

```javascript
// 1. 아이템 생성 시스템
- 랜덤 구역 선택 (LEFT/CENTER/RIGHT)
- 랜덤 아이템 타입 선택 (확률 기반)
- 아이템 객체 생성 및 배열에 추가

// 2. 아이템 낙하 시스템
- requestAnimationFrame으로 부드러운 애니메이션
- 레벨에 따른 낙하 속도 조절
- 화면 하단 도달 시 충돌 검사

// 3. 충돌 검사 시스템
- 바구니 위치와 아이템 위치 비교
- 과일: 점수 추가
- 폭탄: 게임 오버
- 놓침: 카운트 증가

// 4. 레벨 시스템
- 시간 기반 레벨업 (20초마다)
- 레벨에 따른 난이도 조절

// 5. UI 업데이트
- 점수, 레벨, 시간, 놓침 카운트 실시간 표시
```

---

## 📝 개발 체크리스트

게임 개발 과정을 체크하세요.

- [x] 게임 규칙 작성 완료
- [ ] Teachable Machine 모델 학습 완료
- [ ] 모델 파일 `my_model/` 폴더에 배치
- [ ] `metadata.json` 라벨 확인
- [ ] `js/gameEngine.js` 게임 로직 구현
  - [ ] 아이템 생성 시스템
  - [ ] 아이템 낙하 애니메이션
  - [ ] 충돌 검사 로직
  - [ ] 점수 및 레벨 시스템
- [ ] `index.html` UI 수정
  - [ ] 게임 영역 추가
  - [ ] 정보 표시 UI
- [ ] `css/style.css` 스타일 적용
  - [ ] 3구역 레이아웃
  - [ ] 아이템 디자인
  - [ ] 바구니 디자인
- [ ] `js/main.js` 연결
- [ ] 로컬 테스트 완료
- [ ] 버그 수정
- [ ] GitHub에 push
- [ ] GitHub Pages 배포 완료

---

## 🚀 다음 단계

1. ✅ 게임 규칙 작성 완료
2. ⏭️ Teachable Machine에서 포즈 모델 학습
   - https://teachablemachine.withgoogle.com 접속
   - LEFT, CENTER, RIGHT 포즈 학습
3. ⏭️ 모델 파일 다운로드 및 `my_model/` 배치
4. ⏭️ 게임 로직 구현 시작
